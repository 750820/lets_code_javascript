var log = require('../logger').create('preprocess.commonjs');

var CommonJS = function(content, file, basePath, done) {
  log.debug('Processing "%s".', file.originalPath);

	var output =
		"window.__cjsmodules__ = window.__cjsmodules__ || {};" +
		"window.__cjsmodules__['" + file.originalPath + "'] = function(require, module, exports) {" +
			content +
		"}";

	done(output);
};

// PUBLISH
module.exports = CommonJS;
