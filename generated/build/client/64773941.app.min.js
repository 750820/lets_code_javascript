require=function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var s=typeof require=="function"&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}var i=typeof require=="function"&&require;for(var u=0;u<r.length;u++)o(r[u]);return o}({"./client.js":[function(e,t,n){!function(){"use strict";var t=e("./svg_canvas.js");var r=e("./html_element.js");var o=e("./browser.js");var i=e("./fail_fast.js");var u=null;var a=null;var s=false;var c;var f;var l;var p;n.initializeDrawingArea=function(e){if(u!==null)throw new Error("Client.js is not re-entrant");c=e.drawingAreaDiv;f=e.clearScreenButton;i.unlessDefined(c,"elements.drawingArea");i.unlessDefined(f,"elements.clearScreenButton");l=new r(document.body);p=new r(window);u=new t(c);c.preventBrowserDragDefaults();h();v();d();return u};n.drawingAreaHasBeenRemovedFromDom=function(){u=null};function h(){f.onMouseClick(function(){u.clear()})}function v(){c.onMouseDown(m);l.onMouseMove(w);p.onMouseUp(y)}function d(){c.onSingleTouchStart(m);c.onSingleTouchMove(w);c.onTouchEnd(y);c.onTouchCancel(y);c.onMultiTouchStart(y)}function m(e){a=c.relativeOffset(e)}function w(e){if(!g())return;var t=c.relativeOffset(e);if(a.x!==t.x||a.y!==t.y){u.drawLine(a.x,a.y,t.x,t.y);a=t;s=true}}function y(){if(!g())return;if(!s)u.drawDot(a.x,a.y);a=null;s=false}function g(){return a!==null}}()},{"./browser.js":1,"./fail_fast.js":2,"./html_element.js":"./html_element.js","./svg_canvas.js":3}],"./html_element.js":[function(e,t,n){!function(){"use strict";var n=e("./browser.js");var r=e("./fail_fast.js");var o=t.exports=function(e){var t=this;t._domElement=e;t._element=$(e);t._dragDefaultsPrevented=false};o.fromHtml=function(e){return new o($(e)[0])};o.fromId=function(e){var t=document.getElementById(e);r.unlessTrue(t!==null,"could not find element with id '"+e+"'");return new o(t)};o.prototype.removeAllEventHandlers=function(){this._element.off()};o.prototype.preventBrowserDragDefaults=function(){this._element.on("selectstart",e);this._element.on("mousedown",e);this._element.on("touchstart",e);this._dragDefaultsPrevented=true;function e(e){e.preventDefault()}};o.prototype.isBrowserDragDefaultsPrevented=function(){return this._dragDefaultsPrevented};o.prototype.triggerMouseClick=i("click");o.prototype.triggerMouseDown=i("mousedown");o.prototype.triggerMouseMove=i("mousemove");o.prototype.triggerMouseLeave=i("mouseleave");o.prototype.triggerMouseUp=i("mouseup");o.prototype.onMouseClick=u("click");o.prototype.onMouseDown=u("mousedown");o.prototype.onMouseMove=u("mousemove");o.prototype.onMouseLeave=u("mouseleave");o.prototype.onMouseUp=u("mouseup");function i(e){return function(t,n){var r;if(t===undefined||n===undefined){r={x:0,y:0}}else{r=w(this,t,n)}a(this,e,r)}}function u(e){return function(t){this._element.on(e,function(e){var n={x:e.pageX,y:e.pageY};t(n)})}}function a(e,t,n){var r=e._element;var o=new jQuery.Event;o.pageX=n.x;o.pageY=n.y;o.type=t;r.trigger(o)}o.prototype.triggerTouchEnd=s("touchend");o.prototype.triggerTouchCancel=s("touchcancel");o.prototype.triggerSingleTouchStart=c("touchstart");o.prototype.triggerSingleTouchMove=c("touchmove");o.prototype.triggerMultiTouchStart=f("touchstart");o.prototype.onTouchEnd=l("touchend");o.prototype.onTouchCancel=l("touchcancel");o.prototype.onSingleTouchStart=p("touchstart");o.prototype.onSingleTouchMove=p("touchmove");o.prototype.onMultiTouchStart=h("touchstart");function s(e){return function(){v(this,e,new TouchList)}}function c(e){return function(t,n){var r=d(this,t,n);v(this,e,new TouchList(r))}}function f(e){return function(t,n,r,o){var i=d(this,t,n);var u=d(this,r,o);v(this,e,new TouchList(i,u))}}function l(e){return function(t){this._element.on(e,function(){t()})}}function p(e){return function(t){this._element.on(e,function(e){var n=e.originalEvent;if(n.touches.length!==1)return;var r=n.touches[0].pageX;var o=n.touches[0].pageY;var i={x:r,y:o};t(i)})}}function h(e){return function(t){var n=this;this._element.on(e,function(e){var n=e.originalEvent;if(n.touches.length!==1)t()})}}function v(e,t,n){var r=document.createEvent("TouchEvent");r.initTouchEvent(t,true,true,window,null,0,0,0,0,false,false,false,false,n,n,n);var o=new jQuery.Event("event");o.type=t;o.originalEvent=r;e._element.trigger(o)}function d(e,t,n){var r=w(e,t,n);var o=e._element[0];var i=0;var u=r.x;var a=r.y;var s=0;var c=0;return new Touch(undefined,o,i,u,a,s,c)}o.prototype.getDimensions=function(){return{width:this._element.width(),height:this._element.height()}};o.prototype.relativeOffset=function(e){return m(this,e.x,e.y)};o.prototype.pageOffset=function(e){return w(this,e.x,e.y)};function m(e,t,n){y(e);var r=e._element.offset();return{x:t-r.left,y:n-r.top}}function w(e,t,n){y(e);var r=e._element.offset();return{x:t+r.left,y:n+r.top}}function y(e){t("top");t("left");n("top");n("left");function t(t){var n=e._element.css("padding-"+t);if(n!=="0px")throw new Error("Do not apply padding to elements used with relativeOffset() (expected 0px but was "+n+")")}function n(t){var n=e._element.css("border-"+t+"-width");if(n!=="0px")throw new Error("Do not apply border to elements used with relativeOffset() (expected 0px but was "+n+")")}}o.prototype.append=function(e){this._element.append(e._element)};o.prototype.appendSelfToBody=function(){$(document.body).append(this._element)};o.prototype.remove=function(){this._element.remove()};o.prototype.toDomElement=function(){return this._element[0]}}()},{"./browser.js":1,"./fail_fast.js":2}],1:[function(e,t,n){!function(){"use strict";n.supportsTouchEvents=function(){return e("touch")};function e(e){var t=Modernizr[e];if(t===undefined)throw new Error(e+" is not checked by the installed version of Modernizr");return t}}()},{}],2:[function(e,t,n){!function(){"use strict";n.unlessDefined=function(t,r){r=r?" ["+r+"] ":" ";if(t===undefined)throw new e(n.unlessDefined,"Required variable"+r+"was not defined")};n.unlessTrue=function(t,r){if(r===undefined)r="Expected condition to be true";if(t===false)throw new e(n.unlessTrue,r);if(t!==true)throw new e(n.unlessTrue,"Expected condition to be true or false")};n.unreachable=function(t){if(!t)t="Unreachable code executed";throw new e(n.unreachable,t)};var e=n.FailFastException=function(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,e);this.message=t};e.prototype=new Error;e.prototype.constructor=e;e.prototype.name="FailFastException"}()},{}],3:[function(e,t,n){!function(){"use strict";var e=t.exports=function(e){var t=e.getDimensions();this._paper=new Raphael(e.toDomElement(),t.width,t.height)};e.LINE_COLOR="black";e.STROKE_WIDTH=2;e.LINE_CAP="round";e.prototype.clear=function(){this._paper.clear()};e.prototype.drawLine=function(t,n,r,o){this._paper.path("M"+t+","+n+"L"+r+","+o).attr({stroke:e.LINE_COLOR,"stroke-width":e.STROKE_WIDTH,"stroke-linecap":e.LINE_CAP})};e.prototype.drawDot=function(t,n){this._paper.circle(t,n,e.STROKE_WIDTH/2).attr({stroke:e.LINE_COLOR,fill:e.LINE_COLOR})};e.prototype.lineSegments=function(){var e=[];this._paper.forEach(function(t){e.push(n(t))});return e};e.prototype.elementsForTestingOnly=function(){var e=[];this._paper.forEach(function(t){e.push(t)});return e};function n(e){switch(e.type){case"path":return o(e);case"circle":return r(e);default:throw new Error("Unknown element type: "+e.type)}}function r(e){return[e.attrs.cx,e.attrs.cy]}function o(e){if(!Raphael.svg)throw new Error("Unknown Raphael rendering engine");return i(e)}function i(e){var t;var n=e.node.attributes.d.value;if(n.indexOf(",")!==-1){t=/M(\d+),(\d+)L(\d+),(\d+)/}else{t=/M (\d+) (\d+) L (\d+) (\d+)/}var r=n.match(t);return[r[1],r[2],r[3],r[4]]}}()},{}]},{},[]);