require=function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var a=typeof require=="function"&&require;if(!s&&a)return a(i,!0);if(u)return u(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){var n=t[i][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[i].exports}var u=typeof require=="function"&&require;for(var i=0;i<r.length;i++)o(r[i]);return o}({"./client.js":[function(e,t,n){!function(){"use strict";var t=e("./svg_canvas.js");var r=e("./html_element.js");var o=e("./browser.js");var u=e("./fail_fast.js");var i=null;var s=null;var a=false;var c;var f;var l;var p;var d=false;n.initializeDrawingArea=function(e){if(i!==null)throw new Error("Client.js is not re-entrant");c=e.drawingAreaDiv;f=e.clearScreenButton;u.unlessDefined(c,"elements.drawingArea");u.unlessDefined(f,"elements.clearScreenButton");l=new r(document.body);p=new r(window);i=new t(c);c.preventBrowserDragDefaults();h();v();m();return i};n.drawingAreaHasBeenRemovedFromDom=function(){i=null};function h(){f.onMouseClick(function(){i.clear()})}function v(){c.onMouseDown(w);l.onMouseMove(y);p.onMouseUp(g);if(o.doesNotHandlesUserEventsOnWindow()){c.onMouseUp(g);d=true}}function m(){c.onSingleTouchStart(w);c.onSingleTouchMove(y);c.onTouchEnd(g);c.onTouchCancel(g);c.onMultiTouchStart(g)}function w(e){s=c.relativeOffset(e);if(d)c.setCapture()}function y(e){if(!_())return;var t=c.relativeOffset(e);if(s.x!==t.x||s.y!==t.y){i.drawLine(s.x,s.y,t.x,t.y);s=t;a=true}}function g(){if(!_())return;if(!a)i.drawDot(s.x,s.y);if(d)c.releaseCapture();s=null;a=false}function _(){return s!==null}}()},{"./browser.js":1,"./fail_fast.js":2,"./html_element.js":"./html_element.js","./svg_canvas.js":3}],"./html_element.js":[function(e,t,n){!function(){"use strict";var n=e("./browser.js");var r=e("./fail_fast.js");var o=null;var u=t.exports=function(e){var t=this;t._domElement=e;t._element=$(e);t._dragDefaultsPrevented=false};u.fromHtml=function(e){return new u($(e)[0])};u.fromId=function(e){var t=document.getElementById(e);r.unlessTrue(t!==null,"could not find element with id '"+e+"'");return new u(t)};u.prototype.setCapture=function(){o=this;this._domElement.setCapture()};u.prototype.releaseCapture=function(){o=null;this._domElement.releaseCapture()};u.prototype.removeAllEventHandlers=function(){this._element.off()};u.prototype.preventBrowserDragDefaults=function(){this._element.on("selectstart",e);this._element.on("mousedown",e);this._element.on("touchstart",e);this._dragDefaultsPrevented=true;function e(e){e.preventDefault()}};u.prototype.isBrowserDragDefaultsPrevented=function(){return this._dragDefaultsPrevented};u.prototype.triggerMouseClick=i("click");u.prototype.triggerMouseDown=i("mousedown");u.prototype.triggerMouseMove=i("mousemove");u.prototype.triggerMouseLeave=i("mouseleave");u.prototype.triggerMouseUp=i("mouseup");u.prototype.onMouseClick=s("click");u.prototype.onMouseDown=s("mousedown");u.prototype.onMouseMove=s("mousemove");u.prototype.onMouseLeave=s("mouseleave");u.prototype.onMouseUp=s("mouseup");function i(e){return function(t,n){var r=o||this;var u;if(t===undefined||n===undefined){u={x:0,y:0}}else{u=y(this,t,n)}a(r,e,u)}}function s(e){return function(t){if(n.doesNotHandlesUserEventsOnWindow()&&this._domElement===window)return;this._element.on(e,function(e){var n={x:e.pageX,y:e.pageY};t(n)})}}function a(e,t,n){var r=e._element;var o=new jQuery.Event;o.pageX=n.x;o.pageY=n.y;o.type=t;r.trigger(o)}u.prototype.triggerTouchEnd=c("touchend");u.prototype.triggerTouchCancel=c("touchcancel");u.prototype.triggerSingleTouchStart=f("touchstart");u.prototype.triggerSingleTouchMove=f("touchmove");u.prototype.triggerMultiTouchStart=l("touchstart");u.prototype.onTouchEnd=p("touchend");u.prototype.onTouchCancel=p("touchcancel");u.prototype.onSingleTouchStart=d("touchstart");u.prototype.onSingleTouchMove=d("touchmove");u.prototype.onMultiTouchStart=h("touchstart");function c(e){return function(){v(this,e,new TouchList)}}function f(e){return function(t,n){var r=m(this,t,n);v(this,e,new TouchList(r))}}function l(e){return function(t,n,r,o){var u=m(this,t,n);var i=m(this,r,o);v(this,e,new TouchList(u,i))}}function p(e){return function(t){this._element.on(e,function(){t()})}}function d(e){return function(t){this._element.on(e,function(e){var n=e.originalEvent;if(n.touches.length!==1)return;var r=n.touches[0].pageX;var o=n.touches[0].pageY;var u={x:r,y:o};t(u)})}}function h(e){return function(t){var n=this;this._element.on(e,function(e){var n=e.originalEvent;if(n.touches.length!==1)t()})}}function v(e,t,n){var r=document.createEvent("TouchEvent");r.initTouchEvent(t,true,true,window,null,0,0,0,0,false,false,false,false,n,n,n);var o=new jQuery.Event("event");o.type=t;o.originalEvent=r;e._element.trigger(o)}function m(e,t,n){var r=y(e,t,n);var o=e._element[0];var u=0;var i=r.x;var s=r.y;var a=0;var c=0;return new Touch(undefined,o,u,i,s,a,c)}u.prototype.getDimensions=function(){return{width:this._element.width(),height:this._element.height()}};u.prototype.relativeOffset=function(e){return w(this,e.x,e.y)};u.prototype.pageOffset=function(e){return y(this,e.x,e.y)};function w(e,t,n){g(e);var r=e._element.offset();return{x:t-r.left,y:n-r.top}}function y(e,t,n){g(e);var r=e._element.offset();return{x:t+r.left,y:n+r.top}}function g(e){t("top");t("left");r("top");r("left");function t(t){var n=e._element.css("padding-"+t);if(n!=="0px")throw new Error("Do not apply padding to elements used with relativeOffset() (expected 0px but was "+n+")")}function r(t){var r=e._element.css("border-"+t+"-width");if(n.doesNotComputeStyles()){if(e._element.css("border-"+t+"-style")==="none")r="0px"}if(r!=="0px")throw new Error("Do not apply border to elements used with relativeOffset() (expected 0px but was "+r+")")}}u.prototype.append=function(e){this._element.append(e._element)};u.prototype.appendSelfToBody=function(){$(document.body).append(this._element)};u.prototype.remove=function(){this._element.remove()};u.prototype.toDomElement=function(){return this._element[0]}}()},{"./browser.js":1,"./fail_fast.js":2}],1:[function(e,t,n){!function(){"use strict";n.supportsTouchEvents=function(){return e("touch")};n.supportsBorderRadiusCss=function(){return e("borderradius")};n.supportsBoxShadowCss=function(){return e("boxshadow")};n.supportsCaptureApi=function(){return document.body.setCapture&&document.body.releaseCapture};n.reportsElementPositionOffByOneSometimes=function(){return t()};n.doesNotHandlesUserEventsOnWindow=function(){return t()};n.doesNotComputeStyles=function(){return t()};function e(e){var t=Modernizr[e];if(t===undefined)throw new Error(e+" is not checked by the installed version of Modernizr");return t}function t(){return $.browser.msie&&$.browser.version==="8.0"}}()},{}],2:[function(e,t,n){!function(){"use strict";n.unlessDefined=function(t,r){r=r?" ["+r+"] ":" ";if(t===undefined)throw new e(n.unlessDefined,"Required variable"+r+"was not defined")};n.unlessTrue=function(t,r){if(r===undefined)r="Expected condition to be true";if(t===false)throw new e(n.unlessTrue,r);if(t!==true)throw new e(n.unlessTrue,"Expected condition to be true or false")};n.unreachable=function(t){if(!t)t="Unreachable code executed";throw new e(n.unreachable,t)};var e=n.FailFastException=function(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,e);this.message=t};e.prototype=new Error;e.prototype.constructor=e;e.prototype.name="FailFastException"}()},{}],3:[function(e,t,n){!function(){"use strict";var e=t.exports=function(e){var t=e.getDimensions();this._paper=new Raphael(e.toDomElement(),t.width,t.height)};e.LINE_COLOR="black";e.STROKE_WIDTH=2;e.LINE_CAP="round";e.prototype.clear=function(){this._paper.clear()};e.prototype.drawLine=function(t,n,r,o){this._paper.path("M"+t+","+n+"L"+r+","+o).attr({stroke:e.LINE_COLOR,"stroke-width":e.STROKE_WIDTH,"stroke-linecap":e.LINE_CAP})};e.prototype.drawDot=function(t,n){this._paper.circle(t,n,e.STROKE_WIDTH/2).attr({stroke:e.LINE_COLOR,fill:e.LINE_COLOR})};e.prototype.lineSegments=function(){var e=[];this._paper.forEach(function(t){e.push(n(t))});return e};e.prototype.elementsForTestingOnly=function(){var e=[];this._paper.forEach(function(t){e.push(t)});return e};function n(e){switch(e.type){case"path":return o(e);case"circle":return r(e);default:throw new Error("Unknown element type: "+e.type)}}function r(e){return[e.attrs.cx,e.attrs.cy]}function o(e){if(Raphael.svg){return u(e)}else if(Raphael.vml){return i(e)}else{throw new Error("Unknown Raphael rendering engine")}}function u(e){var t;var n=e.node.attributes.d.value;if(n.indexOf(",")!==-1){t=/M(\d+),(\d+)L(\d+),(\d+)/}else{t=/M (\d+) (\d+) L (\d+) (\d+)/}var r=n.match(t);return[r[1],r[2],r[3],r[4]]}function i(e){var t=21600;var n=e.node.path.value;var r=/m(\d+),(\d+) l(\d+),(\d+) e/;var o=n.match(r);var u=o[1]/t;var i=o[2]/t;var s=o[3]/t;var a=o[4]/t;return[u,i,s,a]}}()},{}]},{},[]);